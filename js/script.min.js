var lat,lon,app=angular.module("main",["uiGmapgoogle-maps"]);app.controller("mainCtrl",function(e,a,t){e.currentPage=0,e.pageSize=10,e.message="Click on the map to view images",e.numberOfPages=function(){return 1},angular.extend(e,{map:{center:{latitude:28.7041,longitude:77.1025},zoom:10,markers:[],events:{click:function(t,n,o){var l=o[0];lat=l.latLng.lat(),lon=l.latLng.lng();var r={id:Date.now(),coords:{latitude:lat,longitude:lon}};e.map.markers=[],e.map.markers.push(r),e.$apply(),document.getElementById("img-cont").classList.remove("collapse"),document.getElementById("map-cont").classList.remove("collapse"),a.get("https://api.flickr.com/services/rest/?method=flickr.places.findByLatLon&api_key=a5e95177da353f58113fd60296e1d250&lat="+lat+"&lon="+lon+"&accuracy=10&format=json&nojsoncallback=1").then(function(a){e.message="You are browsing in "+a.data.places.place[0].woe_name}),a.get("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=a5e95177da353f58113fd60296e1d250&lat="+lat+"&lon="+lon+"&accuracy=9&format=json&nojsoncallback=1").then(function(a){e.records=a.data.photos.photo,e.numberOfPages=function(){return 0==Math.ceil(e.records.length/e.pageSize)?1:Math.ceil(e.records.length/e.pageSize)}})}}}})}),app.filter("startFrom",function(){return function(e,a){return a=+a,e.slice(a)}});